# 系统日志联调回归用例（2026-02-09）

> 说明：本轮按需求不包含“导出 CSV”用例。

## 用例清单

### 1) 分页
- 前置：系统日志存在 25 条以上数据。
- 步骤：页面大小设为 10，依次切到第 1/2/3 页。
- 预期：
  - 第 1 页展示 10 条；第 2 页展示 10 条；第 3 页展示剩余条数。
  - 总数与接口 `total` 一致。

### 2) 排序
- 前置：存在多条不同 `logTime` 的日志。
- 步骤：点击“时间”列切换升序/降序。
- 预期：
  - 升序时最早日志在前。
  - 降序时最新日志在前。

### 3) 时间范围
- 前置：准备一段明确时间窗口（如 `2026-02-09 00:00:00` 到 `2026-02-09 23:59:59`）。
- 步骤：设置时间范围后查询。
- 预期：
  - 返回日志均落在时间窗口内。
  - 取消时间范围后，结果恢复为全量（受其他筛选条件影响）。

### 4) 空结果
- 前置：输入不存在关键词（如随机字符串）。
- 步骤：查询。
- 预期：
  - 列表为空。
  - `total = 0`。
  - 页面无报错。

### 5) 快速筛选预设
- 前置：同时存在 `backend` 与 `caddy_runtime` 源日志，且含 `error` 级别日志。
- 步骤：依次点击“仅后端 / 仅 Caddy 后台 / 仅错误级别”。
- 预期：
  - “仅后端”仅显示 `source=backend`。
  - “仅 Caddy 后台”仅显示 `source=caddy_runtime`。
  - “仅错误级别”仅显示 `level=error`。

### 6) 单条复制
- 前置：列表有日志数据。
- 步骤：点击行内“复制”按钮，或详情弹窗内“复制日志”按钮。
- 预期：
  - 剪贴板包含该条日志关键字段（时间、级别、来源、内容、Trace/Span、扩展字段、原始日志）。
  - 页面提示“日志已复制”。

### 7) 详情长文本折叠
- 前置：存在 `rawLog`/`extraData` 超长日志。
- 步骤：打开详情，观察默认展示后点击“展开/收起”。
- 预期：
  - 默认展示截断文本并提示可展开。
  - 点击“展开”后展示完整内容。
  - 点击“收起”恢复截断展示。

### 8) RBAC 页面可见性
- 前置：准备两个角色：
  - 角色 A：仅有 `logs`。
  - 角色 B：仅有 `logs_caddy`。
- 步骤：分别登录 A/B 账号。
- 预期：
  - 角色 A 仅可见并访问 `/caddy/system-log`，不可见 `/caddy/log`。
  - 角色 B 仅可见并访问 `/caddy/log`，不可见 `/caddy/system-log`。

